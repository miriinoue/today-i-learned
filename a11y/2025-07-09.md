# アクセシブルな認証（最低限）を理解する（WCAG 2.2で追加）

## 目的

**目標**：より少ない知的努力でログインできるようにする。

**何をすればよいか**：ログインの際に、人々に何かを解かせたり、思い出させたり、転記させないようにする。

**なぜそれが重要か**：認知障害のある人々の中には、パズルを解くこと、ユーザー名及びパスワードを記憶すること、又はワンタイムパスコードを再入力することができない人もいる。

## WCAG 2.2 達成基準 3.3.8 - レベルAA

認知機能テストは、認証時に使用してはならない。ただし、以下のいずれかが提供されている場合は使用してもよい：

- **代替**：認知機能テストに依存しない別の認証方法
- **メカニズム**：認知機能テストの完了を支援するメカニズムが利用可能（自動入力、貼り付けなど）
- **物体の認識**：ユーザーが物体を認識する
- **個人特有のコンテンツ**：ユーザーが以前に提供した非テキストコンテンツを特定する（ユーザーが設定したセキュリティ画像を選ぶなど。実際の実装例は見つけられず）

## 認知機能テストとは

記憶、計算、問題解決などの認知機能に依存するタスク（パスワードを記憶する、パズルを解く、など）。

**該当例**：計算CAPTCHA、複雑なパスワード暗記、物体認識（「信号機を選んでください」などは認知機能テストだがレベルAAでは例外として許可）
**非該当例**：生体認証、自動入力対応パスワード

## 適合例と失敗例

### 適合例

- **自動入力対応フォーム（H100）**：パスワードマネージャーからの自動入力や貼り付けを許可し、ユーザーが手動でパスワードを入力する必要がないログインフォーム
- **メールリンクログイン（G218）**：パスワードを使わず、メールで送られるリンクをクリックするだけでログインできる方法

### 失敗例（F109）

パスワードやコードを元の形式と異なる形式で再入力することを要求することは、達成基準3.3.8の失敗例とされている。

- **パスワードの一部入力**：「パスワードの2番目、6番目、最後の文字を入力してください」
- **分割された認証コード入力**：6桁の認証コードを1文字ずつ別々の入力欄に入力させる
- **ドロップダウンでの文字選択**：固定長パスワードの各文字を個別のプルダウンメニューから選択させる

これらはすべて、パスワードマネージャーからの貼り付けや自動入力を阻害し、ユーザーに転記を強制するため失敗例となる。転記は認知機能テスト（記憶や注意力を要求するタスク）に該当し、認知障害のある人にとって大きな負担となる。

### その他の失敗例

- **計算CAPTCHA**：「12 + 7 = ?」などの数学的計算を要求する認知機能テスト

## 参考

- [WCAG 2.2 達成基準 3.3.8](https://waic.jp/translations/WCAG22/Understanding/accessible-authentication-minimum)
- [F109: パスワードまたはコードの再入力形式を防ぐことによる失敗](https://www.w3.org/WAI/WCAG22/Techniques/failures/F109)
